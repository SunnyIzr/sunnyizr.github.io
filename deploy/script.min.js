var i=0,EmailSignUps={submitEmail:function(a,b,c,d,e,f){$.ajax({url:"https://httpstat.us/200",method:"post",data:{email_submission:{email:a}}}).done(function(){fbq("track","Lead"),distinct_id=mixpanel.get_distinct_id(),mixpanel.alias(a,distinct_id),mixpanel.identify(distinct_id),mixpanel.track(b,{email:a}),mixpanel.people.set({$email:a}),i=0,c()}).error(function(){i++,6===i?e():(d(),setTimeout(function(){f(),$(".input-holder, .sing-up-btn").css("opacity","1.0")},1500))})}},stopTime,EmotionalSpenderQuiz={init:function(){this.startQuizListener(),this.loadLeadGenCopyListener(),this.displayEmailInputListener(),this.submitEmailListener(),this.trackSocialShare()},startQuizListener:function(){mixpanel.track("Emotional Spender Quiz Start"),$("#startQuiz, #startQuiz2").click(EmotionalSpenderQuiz.startQuiz)},loadLeadGenCopyListener:function(){$("#loadLeadGen").click(function(){mixpanel.track("Emotional Spender Quiz Show Lead Gen"),$(".leadGenContent").show(),$(".social_sp_block").animate({scrollTop:$(this)[0].scrollHeight},700),setTimeout(function(){$(".mainQuiz").animate({scrollTop:$("#leadGenContent").offset().top+330},"slow")},300),setTimeout(function(){$(".leadGenContent").addClass("active");var a=$("#resultTitle").text();$("#resultSpan").html('So <span class="bold_text">'+a.toLowerCase()+"</span>, huh?"),$(".start_here-button-holder").removeClass("active")},150)})},displayEmailInputListener:function(){$(".start-btn").click(function(){mixpanel.track("Emotional Spender Quiz Show Email Input"),$(".start-btn").addClass("grow"),setTimeout(function(){$(".start-btn").css("opacity","0.0"),$(".input-holder input").focus()},700),setTimeout(function(){$(".input-holder, .sing-up-btn").css("opacity","1.0"),$(".start-btn").css("z-index","-1")},900)})},submitEmailListener:function(){$("#submitEmailButton2").click(function(){function a(){$("#leadGenContent").fadeOut(),$(".welcom-content, .start_here-button-holder").addClass("active")}function b(){$(".start_here-button-holder, .welcome-content-erore-holder, .errore").addClass("active")}function c(){$(".start_here-button-holder, .welcome-content-erore-holder, .try-again-later").addClass("active")}function d(){$(".start_here-button-holder, .welcome-content-erore-holder, .errore").removeClass("active")}var e=$("#emailInput2").val(),f="Emotional Spender Quiz Email Sign Up";EmailSignUps.submitEmail(e,f,a,b,c,d),EmotionalSpenderQuiz.submitEmailToClaspSubs(e)}),$("#emailInput2").on("keyup",function(a){13===a.keyCode&&(a.preventDefault(),$("#submitEmailButton2").click())})},submitEmailToClaspSubs:function(a){$.ajax({url:apiUrl+"/spender_quiz_email_submissions",method:"post",data:{session_id:EmotionalSpenderQuiz.sessionId,response:{email:a}}}).done(function(a){})},sessionId:null,startQuiz:function(){$("body").addClass("cloak"),$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"post"}).done(function(a){EmotionalSpenderQuiz.sessionId=a.session_id,EmotionalSpenderQuiz.populateQuestionAndProgress(a.question,a.progress,a.percent_complete),changePageAnim("quiz_active")})},submitQuestion:function(a,b){mixpanel.track("Emotional Spender Quiz Submit Question",{questionName:a,answer:b}),$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"patch",data:{session_id:EmotionalSpenderQuiz.sessionId,response:{question:a,answer:b}}}).done(function(a){EmotionalSpenderQuiz.sessionId=a.session_id,stopTime&&clearTimeout(stopTime),$("#quiz_question").addClass("animText"),stopTime=setTimeout(function(){"question"===a.type?(EmotionalSpenderQuiz.populateQuestionAndProgress(a.question,a.progress,a.percent_complete),$("#quiz_choices").removeClass("active"),$("#quiz_question").removeClass("animText")):"result"===a.type&&($("body").addClass("cloak"),EmotionalSpenderQuiz.populatesResult(a.result))},2e3)})},populateQuestionAndProgress:function(a,b,c){var d="";$("#progress").length&&($("#progress").width(100*c+"%"),$("#progressNum").text(b)),$("#quiz_question").text(a.body),a.choices.map(function(a){d+='<div class="storeBlock" data-name="'+a.name+'"><img src="./images/'+a.image+'.png" alt="'+a.name+'"/><p>'+a.body+"</p></div>"}),$("#quiz_choices").html(d),$(".storeBlock").click(function(){$(this).addClass("active"),$("#quiz_choices").addClass("active"),EmotionalSpenderQuiz.submitQuestion(a.name,this.dataset.name)})},populatesResult:function(a){$("#resultTitle").text(a.title),$("#resultImg").attr("src","./images/"+a.image+".jpg"),$("#resultTips").html(a.tips),$("#resultDesc").html(a.desc),mixpanel.track("Emotional Spender Show Result",{result:a.title}),changePageAnim("result_active","quiz_active")},trackSocialShare:function(){$(document).on("click",".social-shares a",function(a){var b=$(this).data("platform");mixpanel.track("Emotional Spender Quiz Social Share",{platform:b})})}},LandingPage={init:function(){this.submitEmailListener()},submitEmailListener:function(){$("#emailInput").on("keyup",function(a){13===a.keyCode&&(a.preventDefault(),$("#submitEmailButton").click())}),$("#submitEmailButton").on("click",function(){function a(){$(".only-home-page, .welcom-content, .start_here-button-holder").addClass("active")}function b(){$(".start_here-button-holder, .try-again-later, .welcom-content").addClass("active")}function c(){$(".start_here-button-holder, .errore, .welcom-content").addClass("active")}function d(){$(".errore, .welcom-content, .start_here-button-holder ").removeClass("active")}var e=$("#emailInput").val(),f="Website Email Sign Up";EmailSignUps.submitEmail(e,f,a,c,b,d)})}};const apiUrl="https://clasp-subs.herokuapp.com",changePageAnim=function(a,b){setTimeout(function(){var c="cloak "+b;$("body").addClass(a).removeClass(c)},250)},togglePopup=function(){$("body").toggleClass("activePopup")};$(document).ready(function(){if($("#article-page").length){var a=setTimeout(function(){togglePopup(),clearTimeout(a),a=null},15e3);$(".togglePopup").on("click",togglePopup)}else $(".team").click(function(){$(".nav-bar, .aboutPage").addClass("active"),$(".bio-section."+this.dataset.member).addClass("active"),$(".about-us-section.active").removeClass("active")}),$(".back-btn").click(function(){$(".bio-section.active, .nav-bar.active, .aboutPage.active").removeClass("active"),$(".about-us-section").addClass("active")}),LandingPage.init(),EmotionalSpenderQuiz.init()});