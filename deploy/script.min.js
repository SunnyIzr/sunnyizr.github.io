var QuestionGenerator={init:function(){},sessionId:null,startQuiz:function(){$("body").addClass("cloak"),$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"post"}).done(function(a){QuestionGenerator.sessionId=a.session_id,QuestionGenerator.populateQuestionAndProgress(a.question,a.progress,a.percent_complete),changePageAnim("quiz_active")})},submitQuestion:function(a,b){$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"patch",data:{session_id:QuestionGenerator.sessionId,response:{question:a,answer:b}}}).done(function(a){QuestionGenerator.sessionId=a.session_id,"question"==a.type?QuestionGenerator.populateQuestionAndProgress(a.question,a.progress,a.percent_complete):"result"==a.type&&($("body").addClass("cloak"),QuestionGenerator.populatesResult(a.result))})},populateQuestionAndProgress:function(a,b,c){var d="";$("#progress").length&&($("#progress").width(100*c+"%"),$("#progressNum").text(b)),$("#quiz_question").text(a.body),a.choices.map(function(a){d+='<div class="storeBlock" data-name="'+a.name+'"><img src="./images/'+a.image+'.png" alt="'+a.name+'"/><p>'+a.body+"</p></div>"}),$("#quiz_choices").html(d),$(".storeBlock").click(function(){QuestionGenerator.submitQuestion(a.name,this.dataset.name)})},populatesResult:function(a){$("#resultTitle").text(a),changePageAnim("result_active","quiz_active")}};const apiUrl="https://clasp-subs.herokuapp.com",changePageAnim=function(a,b){setTimeout(function(){var c="cloak "+b;$("body").addClass(a).removeClass(c)},250)};$(document).ready(function(){$("#startQuiz").click(QuestionGenerator.startQuiz)});