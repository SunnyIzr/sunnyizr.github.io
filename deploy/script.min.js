function validateEmail(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}var ABTesting={init:function(){},currentExperiments:{},newExperiment:function(a,b,c){var d={name:a,variants:{}},e={activate:function(){$('*[data-variant="'+b+'"]').addClass("variant-visible")},weight:50},f={activate:function(){$('*[data-variant="'+c+'"]').addClass("variant-visible")},weight:50};d.variants[b]=e,d.variants[c]=f,new AlephBet.Experiment(d),ABTesting.setCurrentExperiment(a)},getTestingStore:function(){var a=localStorage.getItem("alephbet");return a?JSON.parse(a):null},setCurrentExperiment:function(a){for(var b=ABTesting.getTestingStore(),c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];if(e.indexOf("variant")>=0)var f=b[e]}ABTesting.currentExperiments[a]=f},mixPanelTrack:function(a,b,c){var d=ABTesting.currentExperiments[c];b["experiment:"+c]=d,mixpanel.track(a,b)}},BlogSection={init:function(){($("#article-page").length>0||$(".home-template").length>0)&&(this.togglePopupListener(),this.emailSubmitPopupEventListener(),this.emailSubmitBlockEventListener())},emailSubmitPopupEventListener:function(){$("#blogEmailSignup").on("submit",function(a){a.preventDefault();var b=$(this).find("input").val();BlogSection.submitEmail(b,!0)})},emailSubmitBlockEventListener:function(){$("#bottomBlogEmailSignup").on("submit",function(a){a.preventDefault();var b=$(this).find("input").val();BlogSection.submitEmail(b,!1)})},submitEmail:function(a,b){1==b?UserSignUps.submitData(null,null,a,"Blog Email Sign Up","Pop Up",!1,null,BlogSection.renderPopupSuccess,BlogSection.renderPopupError):UserSignUps.submitData(null,null,a,"Blog Email Sign Up","Bottom Block",!1,null,BlogSection.renderBlockSuccess,BlogSection.renderBlockError)},togglePopupListener:function(){if(!BlogSection.getCookie("claspblogemail")){var a=setTimeout(function(){BlogSection.togglePopup(),clearTimeout(a),a=null,BlogSection.setCookie()},15e3);$(".closeImg.togglePopup").on("click",BlogSection.togglePopup)}},togglePopup:function(){$("#article-page").length>0&&($("body").toggleClass("activePopup"),$("input[type=email]").focus())},renderPopupSuccess:function(){$(".popupHolder").addClass("submit-success")},renderPopupError:function(){$(".popupHolder").addClass("submit-error")},renderBlockSuccess:function(){$(".afterSignUp").addClass("active")},renderBlockError:function(){$(".signUpBlock").addClass("submit-error")},setCookie:function(){var a=new Date,b=a.getTime();b+=12096e5,a.setTime(b),console.log("claspblogemail=true; "+a.toUTCString()+";"),document.cookie="claspblogemail=true; expires="+a.toUTCString()+"; path=/"},getCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(e.indexOf(b)!=-1)return e.substring(b.length,e.length)}return""},trackSocialShare:function(){$("#article-page .social-shares a").on("click",function(a){var b=$(this).data("platform");mixpanel.track("Blog Social Share",{platform:b})})}},stopTime,EmotionalSpenderQuiz={init:function(){this.startQuizListener(),this.loadLeadGenCopyListener(),this.submitEmailAndNameListener(),this.trackSocialShare()},sessionId:null,startQuizListener:function(){$("#startQuiz, #startQuiz2").click(EmotionalSpenderQuiz.startQuiz)},loadLeadGenCopyListener:function(){$("#loadLeadGen").click(function(){mixpanel.track("Emotional Spender Quiz Show More Content"),$(".leadGenContent").show(),$(".social_sp_block").animate({scrollTop:$(this)[0].scrollHeight},700),setTimeout(function(){$(".mainQuiz").animate({scrollTop:$("#leadGenContent").offset().top+330},"slow")},300),setTimeout(function(){$(".leadGenContent").addClass("active");var a=$("#resultTitle").text();$("#resultSpan").html('So <span class="bold_text">'+a.toLowerCase()+"</span>, huh?"),$(".start_here-button-holder").removeClass("active")},150)})},submitEmailAndNameListener:function(){$("#spenderQuizEmailSubmission").on("submit",function(a){function b(){$(".spender-email-block").addClass("validation-complete"),mixpanel.track("Emotional Spender Show Result")}function c(){$(".email-block-holder").addClass("error-active")}a.preventDefault();var d=$("#emailOfSpender").val(),e="1"+$("#PhoneOfSpender").cleanVal(),f=$("#NameOfSpender").val();validateEmail(d)&&e.length&&!isNaN(e)&&f.length?UserSignUps.submitData(f,e,d,"Emotional Spender Quiz Email Sign Up",null,!1,EmotionalSpenderQuiz.sessionId,b,c):c()})},startQuiz:function(){mixpanel.track("Emotional Spender Quiz Start"),$("body").addClass("cloak"),$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"post"}).done(function(a){EmotionalSpenderQuiz.sessionId=a.session_id,EmotionalSpenderQuiz.populateQuestionAndProgress(a.question,a.progress,a.percent_complete),changePageAnim("quiz_active")})},submitQuestion:function(a,b){mixpanel.track("Emotional Spender Quiz Submit Question",{questionName:a,answer:b}),$.ajax({url:apiUrl+"/spender_quiz_submissions",method:"patch",data:{session_id:EmotionalSpenderQuiz.sessionId,response:{question:a,answer:b}}}).done(function(a){EmotionalSpenderQuiz.sessionId=a.session_id,stopTime&&clearTimeout(stopTime),$("#quiz_question").addClass("animText"),stopTime=setTimeout(function(){"question"===a.type?(EmotionalSpenderQuiz.populateQuestionAndProgress(a.question,a.progress,a.percent_complete),$("#quiz_choices").removeClass("active"),$("#quiz_question").removeClass("animText")):"result"===a.type&&($("body").addClass("cloak"),EmotionalSpenderQuiz.populatesResult(a.result))},2e3)})},populateQuestionAndProgress:function(a,b,c){var d="";$("#progress").length&&($("#progress").width(100*c+"%"),$("#progressNum").text(b)),$("#quiz_question").text(a.body),a.choices.map(function(a){d+='<div class="storeBlock" data-name="'+a.name+'"><img src="./images/'+a.image+'.png" alt="'+a.name+'"/><p>'+a.body+"</p></div>"}),$("#quiz_choices").html(d),$(".storeBlock").click(function(){$(this).addClass("active"),$("#quiz_choices").addClass("active"),EmotionalSpenderQuiz.submitQuestion(a.name,this.dataset.name)})},populatesResult:function(a){$("#resultTitle").text(a.title),$("#resultImg").attr("src","./images/"+a.image+".jpg"),$("#resultTips").html(a.tips),$("#resultDesc").html(a.desc),setTimeout(function(){$("#NameOfSpender").focus()},1e3),mixpanel.track("Emotional Spender Show Email Capture",{result:a.title}),changePageAnim("result_active","quiz_active")},trackSocialShare:function(){$(".social-shares a").on("click",function(a){var b=$(this).data("platform");mixpanel.track("Emotional Spender Quiz Social Share",{platform:b})})}},LandingPage={init:function(){this.displayPhoneInputListener(),this.submitPhoneListener()},displayPhoneInputListener:function(){$(".home-page.start-btn").click(function(){mixpanel.track("Home Page Show Email Input"),$(".start-btn").addClass("grow"),setTimeout(function(){$(".start-btn").css("opacity","0.0"),$(".input-holder input").focus()},700),setTimeout(function(){$(".input-holder, .sing-up-btn").css("opacity","1.0"),$(".start-btn").css("z-index","-1"),$(".topText").addClass("show_instructions")},900)})},submitPhoneListener:function(){$("#phoneInput").on("keyup",function(a){13===a.keyCode&&(a.preventDefault(),$("#submitPhoneButton").click())}),$("#submitPhoneButton").on("click",function(){function a(){$(".only-home-page, .welcom-content, .start_here-button-holder").addClass("active")}function b(){$(".start_here-button-holder, .errore, .welcom-content").addClass("active"),setTimeout(function(){$(".errore, .welcom-content, .start_here-button-holder ").removeClass("active")},1e3)}var c="1"+$("#phoneInput").cleanVal(),d="Website Landing Page Sign Up";UserSignUps.submitData(null,c,null,d,null,!0,null,a,b)})}},i=0,UserSignUps={submitData:function(a,b,c,d,e,f,g,h,i){website_submission={},null!=b&&(website_submission.phone=b),null!=c&&(website_submission.email=c),null!=a&&(website_submission.name=a),submitData={send_invite:f,website_submission:website_submission},null!=g&&(submitData.sessionId=g),$.ajax({url:"https://morning-tor-82718.herokuapp.com/website_submissions",method:"post",data:submitData}).done(function(f){h(),fbq("track","Lead"),distinct_id=mixpanel.get_distinct_id(),null!=b&&(f.new_alias?(mixpanel.alias(b,distinct_id),mixpanel.identify(distinct_id)):mixpanel.identify(b)),trackingSubmission={where:e},null!=b&&(trackingSubmission.phone=b),null!=c&&(trackingSubmission.email=c),null!=a&&(trackingSubmission.name=a),mixpanel.track(d,trackingSubmission),null!=b&&(mixpanel.people.set({$phone:b}),null!=c&&mixpanel.people.set({$email:c}),null!=a&&mixpanel.people.set({$name:a}))}).error(function(){i()})}},$jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(a,b,c,d){if(b){for(c=$jscomp.global,a=a.split("."),d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={}),c=c[e]}a=a[a.length-1],d=c[a],b=b(d),b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}},$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3"),function(a,b,c){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports&&"undefined"==typeof Meteor?module.exports=a(require("jquery")):a(b||c)}(function(a){var b=function(b,c,d){var e={invalid:[],getCaret:function(){try{var a=0,c=b.get(0),d=document.selection,f=c.selectionStart;if(d&&-1===navigator.appVersion.indexOf("MSIE 10")){var g=d.createRange();g.moveStart("character",-e.val().length),a=g.text.length}else(f||"0"===f)&&(a=f);return a}catch(a){}},setCaret:function(a){try{if(b.is(":focus")){var c=b.get(0);if(c.setSelectionRange)c.setSelectionRange(a,a);else{var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}}}catch(a){}},events:function(){b.on("keydown.mask",function(a){b.data("mask-keycode",a.keyCode||a.which),b.data("mask-previus-value",b.val()),b.data("mask-previus-caret-pos",e.getCaret()),e.maskDigitPosMapOld=e.maskDigitPosMap}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",e.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){b.keydown().keyup()},100)}).on("change.mask",function(){b.data("changed",!0)}).on("blur.mask",function(){h===e.val()||b.data("changed")||b.trigger("change"),b.data("changed",!1)}).on("blur.mask",function(){h=e.val()}).on("focus.mask",function(b){!0===d.selectOnFocus&&a(b.target).select()}).on("focusout.mask",function(){d.clearIfNotMatch&&!f.test(e.val())&&e.val("")})},getRegexMask:function(){for(var a,b,d,e,f=[],h=0;h<c.length;h++)(a=g.translation[c.charAt(h)])?(b=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),d=a.optional,(a=a.recursive)?(f.push(c.charAt(h)),e={digit:c.charAt(h),pattern:b}):f.push(d||a?b+"?":b)):f.push(c.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return f=f.join(""),e&&(f=f.replace(new RegExp("("+e.digit+"(.*"+e.digit+")?)"),"($1)?").replace(new RegExp(e.digit,"g"),e.pattern)),new RegExp(f)},destroyEvents:function(){b.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(a){var c=b.is("input")?"val":"text";return 0<arguments.length?(b[c]()!==a&&b[c](a),c=b):c=b[c](),c},calculateCaretPosition:function(a){var c=e.getMasked(),d=e.getCaret();if(a!==c){var f=b.data("mask-previus-caret-pos")||0;c=c.length;var g,h=a.length,i=a=0,j=0,k=0;for(g=d;g<c&&e.maskDigitPosMap[g];g++)i++;for(g=d-1;0<=g&&e.maskDigitPosMap[g];g--)a++;for(g=d-1;0<=g;g--)e.maskDigitPosMap[g]&&j++;for(g=f-1;0<=g;g--)e.maskDigitPosMapOld[g]&&k++;d>h?d=10*c:f>=d&&f!==h?e.maskDigitPosMapOld[d]||(f=d,d=d-(k-j)-a,e.maskDigitPosMap[d]&&(d=f)):d>f&&(d=d+(j-k)+i)}return d},behaviour:function(c){c=c||window.event,e.invalid=[];var d=b.data("mask-keycode");if(-1===a.inArray(d,g.byPassKeys)){d=e.getMasked();var f=e.getCaret(),h=b.data("mask-previus-value")||"";return setTimeout(function(){e.setCaret(e.calculateCaretPosition(h))},a.jMaskGlobals.keyStrokeCompensation),e.val(d),e.setCaret(f),e.callbacks(c)}},getMasked:function(a,b){var f=[],h=void 0===b?e.val():b+"",i=0,j=c.length,k=0,l=h.length,m=1,n="push",o=-1,p=0;if(b=[],d.reverse){n="unshift",m=-1;var q=0;i=j-1,k=l-1;var r=function(){return-1<i&&-1<k}}else q=j-1,r=function(){return i<j&&k<l};for(var s;r();){var t=c.charAt(i),u=h.charAt(k),v=g.translation[t];v?(u.match(v.pattern)?(f[n](u),v.recursive&&(-1===o?o=i:i===q&&i!==o&&(i=o-m),q===o&&(i-=m)),i+=m):u===s?(p--,s=void 0):v.optional?(i+=m,k-=m):v.fallback?(f[n](v.fallback),i+=m,k-=m):e.invalid.push({p:k,v:u,e:v.pattern}),k+=m):(a||f[n](t),u===t?(b.push(k),k+=m):(s=t,b.push(k+p),p++),i+=m)}return a=c.charAt(q),j!==l+1||g.translation[a]||f.push(a),f=f.join(""),e.mapMaskdigitPositions(f,b,l),f},mapMaskdigitPositions:function(a,b,c){for(a=d.reverse?a.length-c:0,e.maskDigitPosMap={},c=0;c<b.length;c++)e.maskDigitPosMap[b[c]+a]=1},callbacks:function(a){var f=e.val(),g=f!==h,i=[f,a,b,d],j=function(a,b,c){"function"==typeof d[a]&&b&&d[a].apply(this,c)};j("onChange",!0===g,i),j("onKeyPress",!0===g,i),j("onComplete",f.length===c.length,i),j("onInvalid",0<e.invalid.length,[f,a,b,e.invalid,d])}};b=a(b);var f,g=this,h=e.val();c="function"==typeof c?c(e.val(),void 0,b,d):c,g.mask=c,g.options=d,g.remove=function(){var a=e.getCaret();return g.options.placeholder&&b.removeAttr("placeholder"),b.data("mask-maxlength")&&b.removeAttr("maxlength"),e.destroyEvents(),e.val(g.getCleanVal()),e.setCaret(a),b},g.getCleanVal=function(){return e.getMasked(!0)},g.getMaskedVal=function(a){return e.getMasked(!1,a)},g.init=function(h){if(h=h||!1,d=d||{},g.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch,g.byPassKeys=a.jMaskGlobals.byPassKeys,g.translation=a.extend({},a.jMaskGlobals.translation,d.translation),g=a.extend(!0,{},g,d),f=e.getRegexMask(),h)e.events(),e.val(e.getMasked());else{d.placeholder&&b.attr("placeholder",d.placeholder),b.data("mask")&&b.attr("autocomplete","off"),h=0;for(var i=!0;h<c.length;h++){var j=g.translation[c.charAt(h)];if(j&&j.recursive){i=!1;break}}i&&b.attr("maxlength",c.length).data("mask-maxlength",!0),e.destroyEvents(),e.events(),h=e.getCaret(),e.val(e.getMasked()),e.setCaret(h)}},g.init(!b.is("input"))};a.maskWatchers={};var c=function(){var c=a(this),e={},f=c.attr("data-mask");if(c.attr("data-mask-reverse")&&(e.reverse=!0),c.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0),"true"===c.attr("data-mask-selectonfocus")&&(e.selectOnFocus=!0),d(c,f,e))return c.data("mask",new b(this,f,e))},d=function(b,c,d){d=d||{};var e=a(b).data("mask"),f=JSON.stringify;b=a(b).val()||a(b).text();try{return"function"==typeof c&&(c=c(b)),"object"!=typeof e||f(e.options)!==f(d)||e.mask!==c}catch(a){}},e=function(a){var b=document.createElement("div");a="on"+a;var c=a in b;return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),c};a.fn.mask=function(c,e){e=e||{};var f=this.selector,g=a.jMaskGlobals,h=g.watchInterval;g=e.watchInputs||g.watchInputs;var i=function(){if(d(this,c,e))return a(this).data("mask",new b(this,c,e))};return a(this).each(i),f&&""!==f&&g&&(clearInterval(a.maskWatchers[f]),a.maskWatchers[f]=setInterval(function(){a(document).find(f).each(i)},h)),this},a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)},a.fn.unmask=function(){return clearInterval(a.maskWatchers[this.selector]),delete a.maskWatchers[this.selector],this.each(function(){var b=a(this).data("mask");b&&b.remove().removeData("mask")})},a.fn.cleanVal=function(){return this.data("mask").getCleanVal()},a.applyDataMask=function(b){b=b||a.jMaskGlobals.maskElements,(b instanceof a?b:a(b)).filter(a.jMaskGlobals.dataMaskAttr).each(c)},e={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&e("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},a.jMaskGlobals=a.jMaskGlobals||{},e=a.jMaskGlobals=a.extend(!0,{},e,a.jMaskGlobals),e.dataMask&&a.applyDataMask(),setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},e.watchInterval)},window.jQuery,window.Zepto),$(".phone_us").mask("+1 (000) 000-0000");const apiUrl="https://morning-tor-82718.herokuapp.com",changePageAnim=function(a,b){setTimeout(function(){var c="cloak "+b;$("body").addClass(a).removeClass(c)},250)};$(document).ready(function(){BlogSection.init(),$("#article-page").length});